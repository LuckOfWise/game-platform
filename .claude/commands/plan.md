# /plan

実装計画を策定します。複雑な機能やリファクタリングの前に使用してください。

## 実行手順

1. **要件の確認**
   - ユーザーの要求を明確化
   - 機能要件と非機能要件を整理

2. **現状分析**
   - 関連ファイルの特定
   - 既存の実装パターンの確認
   - データベーススキーマの確認

3. **影響範囲の特定**
   - 変更が必要なファイル一覧
   - 影響を受けるモデル・コントローラー
   - API変更の有無

4. **実装計画の策定**
   - タスクの分解（小さく独立したステップに）
   - 依存関係の整理
   - 優先順位付け

5. **リスク評価**
   - 技術的リスク
   - データ整合性のリスク
   - パフォーマンスへの影響

6. **テスト戦略**
   - テスト対象の特定
   - テストタイプの決定

## 出力形式

```markdown
# 実装計画: [機能名]

## 概要
[機能の概要と目的]

## 影響範囲
- **ファイル**:
  - app/models/xxx.rb
  - app/controllers/xxx_controller.rb
- **データベース**:
  - テーブル変更の有無
- **API**:
  - エンドポイント変更の有無

## 実装ステップ
1. [ ] ステップ1: [詳細]
2. [ ] ステップ2: [詳細]
3. [ ] ステップ3: [詳細]

## リスクと対策
| リスク | 影響度 | 対策 |
|--------|--------|------|
| xxx | HIGH | xxx |

## テスト計画
- [ ] モデルスペック: xxx
- [ ] リクエストスペック: xxx

## 確認事項
- [ ] 既存テストへの影響
- [ ] セキュリティ要件の確認
```

## 使用例

```
/plan ユーザー認証機能を追加
/plan 検索機能のパフォーマンス改善
```
